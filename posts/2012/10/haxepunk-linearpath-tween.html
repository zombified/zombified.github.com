<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />

    <title>Electric Froth - HaxePunk LinearTween Example</title>
    
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="icon" type='image/png' href="/favicon.png" />
    <link rel="stylesheet" type='text/css' href="/style.css" />

    <meta name='viewport' content='width=device-width; initial-scale=1, maximum-scale=1, user-scalable=0' />
</head>
<body>
    <header>
        <h1><a href='/'><img src='/images/electric-froth-logo.png' alt='Logo' /><span>Electric Froth</span></a></h1>
        <h2>HaxePunk LinearTween Example</h2>
        <nav>
            <ul id='nav'>
                <li><a href='/about.html'>About</a></li>
                <li><a href='/index.html'>Blog</a> <a href='/rss.xml'><img src='/images/feed-icon-14x14.png' alt='RSS Feed' /></a></li>
                <li><a href='/interesting-things.html'>Interesting Things</a></li>
            </ul>
        </nav>
    </header>
    <article id='content'>
        <p><strong>Edit (2013-03-06):</strong> fixed signature for callback/event listener and move this to it's own post</p>
<h3>HaxePunk Tweens</h3>
<p>While exploring <a href="http://haxepunk.com">HaxePunk</a>, I discovered that sometimes documentation can be a
little lacking. So I just wanted to write this down for future reference:</p>
<p>Tweening is pretting simple. Each <em>com.haxepunk.World</em> and <em>com.haxepunk.Entity</em> is
what is called a <em>Tweener</em> (<em>com.haxepunk.Tweener</em>).</p>
<p>There are already a bunch of different tweens in the com.haxepunk.tweens.* namespace.</p>
<p>Specifically, if you want to do motion, based on a path a character has to take, you
can use the <em>com.haxepunk.tweens.motion.LinearPath</em> tween.</p>
<p>In the <em>begin()</em> method of an Entity you can do something like this:</p>
<pre><code>// assuming _movetween is defined elsewhere in the class, and
// com.haxepunk.tweens.motion.LinearPath as been imported
_movetween = new LinearPath(tweenEnds);
_movetween.addPoint(this.x, this.y); // starting point
_movetween.addPoint(this.x+32, this.y); // left 32px
_movetween.addPoint(this.x+32, this.y-32); // left 32px, up 32px, ending point
_movetween.setMotion(0.5); // do this in .5 seconds
this.addTween(_movetween);
</code></pre>
<p>The <em>tweenEnds</em> parameter is just a reference to a function called when the tween ends:</p>
<pre><code>function tweenEnds(event:Dynamic) {
    // set the final x/y values here since the update() method,
    // as detailed below, won't set the final variables since the IDLE
    // state is being started
    this.x = _movetween.x;
    this.y = _movetween.y;
    state = IDLE;
}
</code></pre>
<p>To call this, you just put something like the following in an Entities <em>update()</em> method:</p>
<pre><code>if(startmoving) {
    state = MOVING;
    _movetween.start(); // reset the tween to the beginning and start running it
}
else {
    // the tween will contain the x and y values that are desired at a particular
    // point in time during the tween, and remember, you don't want to set the x
    // and y values immediately after calling start() on the tween -- it'll give
    // you a "hiccup" where your Entity moves to the final spot, then jumps
    // back and progresses allong the LinearPath.
    this.x = _movetween.x;
    this.y = _movetween.y;
}
</code></pre>
<p>Hopefully this has given a little insight for someone (like my future self) on how to
use HaxePunk tweens.</p>
<div id='postdate'>Posted on 2012-10-29</div>
    </article>
    <footer id="footer">
        Built with <a href="http://bitbucket.org/obensonne/poole">Poole</a>
        &middot;
        <a href="http://validator.w3.org/check?uri=referer">Validate This Site</a>
        &middot;
        &copy; Joel Kleier
    </footer>
</body>
</html>
