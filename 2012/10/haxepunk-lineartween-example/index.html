<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />

    <title>HaxePunk LinearTween Example |Electric Froth
</title>

    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" href="/favicon.png" />

    <link rel="stylesheet" href="/normalize.css" />
    <link href='http://fonts.googleapis.com/css?family=Jura:600' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/style.css" />

    <link href="/sitemap.xml" type="application/xml" rel="sitemap" title="Sitemap">
    <link href="/" rel="home start" />
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Atom Feed" />
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="RSS Feed" />
    <!--[if lt IE 9]>
    <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <meta name="description" content="I want to share some example code that describes how to do a simple LinearPath tween w/ the HaxePunk Library" />
    <meta name="keywords" content="gamedev, haxe" />
</head>
<body>
    <div id='page-wrap'>
        <header id='page-header'>
            <h1><a href='/' rel="home start"><span class='electric'>Electric</span><span class='froth'>Froth</span></a></h1>
            <nav class='page-nav'>
                <ul>
                    <li><a href='/about/'>about</a></li>
                    <li class='active'><a href='/' rel="alternate">blog</a></li>
                    <li><a href='/interesting-things/'>Interesting things</a></li>
                </ul>
            </nav>
        </header>
    <section id='post'>
        <article>
            <header>
                <h1>
                    <a href="/2012/10/haxepunk-lineartween-example/" rel="bookmark canonical">HaxePunk LinearTween Example</a>
                </h1>
                <time class='date' datetime="2012-10-29">October 29, 2012</time>
                <span class='description'>I want to share some example code that describes how to do a simple LinearPath tween w/ the HaxePunk Library</span>
            </header>
            <p><strong>Edit (2013-03-06):</strong> fixed signature for callback/event listener and move this to it's own post</p>
<h4>HaxePunk Tweens</h4>
<p>While exploring <a href="http://haxepunk.com">HaxePunk</a>, I discovered that sometimes doc&shy;u&shy;men&shy;ta&shy;tion can be a
little lacking. So I just wanted to write this down for future reference:</p>
<p>Tweening is pretting simple. Each <em>com.haxepunk.World</em> and <em>com.haxepunk.Entity</em> is
what is called a <em>Tweener</em> (<em>com.haxepunk.Tweener</em>).</p>
<p>There are already a bunch of different tweens in the com.haxepunk.tweens.* namespace.</p>
<p>Specif&shy;i&shy;cal&shy;ly, if you want to do motion, based on a path a character has to take, you
can use the <em>com.haxepunk.tweens.motion.LinearPath</em> tween.</p>
<p>In the <em>begin()</em> method of an Entity you can do something like this:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span class="c1">// assuming _movetween is defined elsewhere in the class, and</span>
<span class="c1">// com.haxepunk.tweens.motion.LinearPath as been imported</span>
<span class="n">_movetween</span> <span class="o">=</span> <span class="k">new</span> <span class="n">LinearPath</span><span class="p">(</span><span class="n">tweenEnds</span><span class="p">);</span>
<span class="n">_movetween</span><span class="p">.</span><span class="n">addPoint</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">x</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">y</span><span class="p">);</span> <span class="c1">// starting point</span>
<span class="n">_movetween</span><span class="p">.</span><span class="n">addPoint</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">x</span><span class="o">+</span><span class="mh">32</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">y</span><span class="p">);</span> <span class="c1">// left 32px</span>
<span class="n">_movetween</span><span class="p">.</span><span class="n">addPoint</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">x</span><span class="o">+</span><span class="mh">32</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="n">y</span><span class="o">-</span><span class="mh">32</span><span class="p">);</span> <span class="c1">// left 32px, up 32px, ending point</span>
<span class="n">_movetween</span><span class="p">.</span><span class="n">setMotion</span><span class="p">(</span><span class="mf">0.5</span><span class="p">);</span> <span class="c1">// do this in .5 seconds</span>
<span class="k">this</span><span class="p">.</span><span class="n">addTween</span><span class="p">(</span><span class="n">_movetween</span><span class="p">);</span>
</pre></div>
</td></tr></table>

<p>The <em>tweenEnds</em> parameter is just a reference to a function called when the tween ends:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span class="kd">function</span> <span class="nx">tweenEnds</span><span class="p">(</span><span class="nx">event</span><span class="o">:</span><span class="nx">Dynamic</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// set the final x/y values here since the update() method,</span>
    <span class="c1">// as detailed below, won&#39;t set the final variables since the IDLE</span>
    <span class="c1">// state is being started</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">x</span> <span class="o">=</span> <span class="nx">_movetween</span><span class="p">.</span><span class="nx">x</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">y</span> <span class="o">=</span> <span class="nx">_movetween</span><span class="p">.</span><span class="nx">y</span><span class="p">;</span>
    <span class="nx">state</span> <span class="o">=</span> <span class="nx">IDLE</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<p>To call this, you just put something like the following in an Entities <em>update()</em> method:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span class="k">if</span><span class="p">(</span><span class="n">startmoving</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">state</span> <span class="o">=</span> <span class="n">MOVING</span><span class="p">;</span>
    <span class="n">_movetween</span><span class="p">.</span><span class="n">start</span><span class="p">();</span> <span class="c1">// reset the tween to the beginning and start running it</span>
<span class="p">}</span>
<span class="k">else</span> <span class="p">{</span>
    <span class="c1">// the tween will contain the x and y values that are desired at a particular</span>
    <span class="c1">// point in time during the tween, and remember, you don&#39;t want to set the x</span>
    <span class="c1">// and y values immediately after calling start() on the tween -- it&#39;ll give</span>
    <span class="c1">// you a &quot;hiccup&quot; where your Entity moves to the final spot, then jumps</span>
    <span class="c1">// back and progresses allong the LinearPath.</span>
    <span class="n">this</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">_movetween</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
    <span class="n">this</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">_movetween</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<p>Hopefully this has given a little insight for someone (like my future self) on how to
use HaxePunk tweens.</p>
            <footer>
                
                    <p class='tagged'>tagged as
                        <a href="/tag/gamedev/" rel="tag">gamedev</a>
                            and
                            
                        <a href="/tag/haxe/" rel="tag">haxe</a>
                        
                    </p>
                
                <nav class='post-nav'>
                    <ul>
                
                        <li>
                            <a href="/2012/10/ld48//">
                                &laquo; LD48
                            </a>
                        </li>
                
                
                        <li>
                            <a href="/2012/10/game-off-2012-and-some-haxe-nme+haxepunk//">
                                Game-Off 2012 and some Haxe/NME+HaxePunk &raquo;
                            </a>
                        </li>
                    </ul>
                </nav>
            </footer>
        </article>
    </section>
</div>
    <footer id='page-footer'>
        
        <ul>
            <li><a href='/rss.xml' rel="alternate">RSS</a></li>
            <li>&middot; <a href='/atom.xml' rel="alternate">Atom</a></li>
            <li>&middot; Built with <a href='http://posativ.org/acrylamid'>Acrylamid</a></li>
            <li>&middot; <a href='http://validator.w3.org/check?uri=referer'>Validate this site</a></li>
            <li>&middot; &copy; Joel Kleier</li>
        </ul>
        
    </footer>
</body>
</html>